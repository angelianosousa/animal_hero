<%- model_class = Animal -%>

<nav class='navbar navbar-expand-lg navbar-light bg-light'>
  <div style='margin-top:30px;'>
    <%= form_with url: animals_path, method: :get, local: true, class:"form-inline pull-right" do |f| %>
      <%= f.search_field :name, placeholder: "Pesquisar Animal", class:"form-control" %>
      <%= f.submit "Pesquisar", class:"btn btn-success" %>
    <% end %>
  </div>
  <h1>
    <%=t '.title', :default => model_class.model_name.human.pluralize.titleize %>
    <%= link_to t('.new', :default => t("helpers.links.new")), new_animal_path, class:"btn btn-primary"%>
  </h1>
</nav>

<table class="table table-striped">
  <thead>
    <tr>
      <th><%= model_class.human_attribute_name(:name) %></th>
      <th><%= model_class.human_attribute_name(:race) %></th>
      <th><%= model_class.human_attribute_name(:species) %></th>
      <th><%= model_class.human_attribute_name(:sex) %></th>
      <th><%= model_class.human_attribute_name(:weight) %></th>
      <th><%= model_class.human_attribute_name(:birthdate) %></th>
      <th><%= model_class.human_attribute_name(:situation) %></th>
      <th><%= model_class.human_attribute_name(:ong) %></th>
      <th style="width: 170px" ><%=t '.actions', :default => t("helpers.actions") %></th>
    </tr>
  </thead>

  <tbody>
    <% @animals.each do |animal| %>
      <tr>
        <td><%= animal.name %></td>
        <td><%= animal.race %></td>
        <td><%= animal.species %></td>
        <td><%= animal.sex %></td>
        <td><%= animal.weight %></td>
        <td><%= animal.birthdate.strftime("%d/%m/%Y") %></td>
        <td><%= animal.situation %></td>
        <td><%= animal.ong.nome %></td>
        <td>
          <%= link_to content_tag(:i,'Mostrar'),
                      animal_path(animal), :class => 'btn btn-success btn-xs' %>
          <%= link_to content_tag(:i,'Editar', class: ["fas", "fa-edit"]),
                      edit_animal_path(animal), :class => 'btn btn-primary btn-xs' %>
          <%= link_to content_tag(:i,'Excluir', class: ["fas", "fa-trash"]),
                      animal_path(animal),
                      :method => :delete,
                      :data => { :confirm => t('.confirm', :default => t("helpers.links.confirm", :default => 'Are you sure ?')) },
                      :class => 'btn btn-xs btn-danger' %>
        </td>
      </tr>
    <% end %>
  </tbody>
</table>

<br>

<%= paginate @animals %>